# Flask Система управления сотрудниками

Веб-приложение на основе Flask и SQLAlchemy, отображающее информацию о сотрудниках из базы данных и предоставляющее функционал поиска и обновления данных.

## Особенности

- **Flask-SQLAlchemy модели** с полными связями между таблицами
- **Веб-интерфейс** для управления сотрудниками
- **Миграции базы данных** с Flask-Migrate
- **Валидация данных** на уровне моделей
- **Иерархическая структура** сотрудников (начальник-подчиненный)


## Модели данных

### Position (Должность)
- `id` - Первичный ключ
- `title` - Название должности (уникальное)
- `level` - Уровень должности (1-5, где 1 - высший)

### Employee (Сотрудник)
- `id` - Первичный ключ
- `full_name` - Полное имя сотрудника
- `position_id` - Внешний ключ на Position
- `hire_date` - Дата найма
- `salary` - Зарплата (положительное число)
- `manager_id` - Внешний ключ на Employee (самосвязь)

### Связи между моделями
- **Position → Employee**: Один ко многим (у одной должности может быть много сотрудников)
- **Employee → Employee**: Самосвязь (руководитель-подчиненный)

## Установка и запуск

### 1. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 2. Настройка базы данных
Создайте файл `.env` в корневой директории:
```
DB_NAME=your_database_name
DB_USER=your_username
DB_PASSWORD=your_password
DB_HOST=localhost
DB_PORT=5432
SECRET_KEY=your-secret-key-here
```

### 3. Инициализация базы данных
```bash
# Установить переменную окружения
export FLASK_APP=flask_app.py  # Linux/Mac
# или
set FLASK_APP=flask_app.py     # Windows

# Применить миграции
flask db upgrade

# Создать тестовые данные (опционально)
flask seed-db
```

### 4. Запуск приложения
```bash
python flask_app.py
# или
flask --app flask_app run
```

## Веб-интерфейс

- `/` - Главная страница с панелью управления
- `/employees` - Список всех сотрудников с фильтрами
- `/employee/<id>` - Детальная информация о сотруднике
- `/positions` - Управление должностями
- `/hierarchy` - Организационная структура
- `/add_employee` - Добавление нового сотрудника
- `/edit_employee/<id>` - Редактирование сотрудника

## Валидация данных

Модели включают следующие проверки:
- Уровень должности должен быть от 1 до 5
- Зарплата должна быть положительной
- Дата найма не может быть в будущем
- Руководитель должен иметь более высокий уровень должности
- Сотрудник не может быть руководителем самого себя
